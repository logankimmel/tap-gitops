---
tap_install:
  values:
    profile: full
    ceip_policy_disclosed: true
    excluded_packages:
      # - appliveview.tanzu.vmware.com
      # - backend.appliveview.tanzu.vmware.com
      # - buildservice.tanzu.vmware.com # excluding to use the dependency updator
      # - connector.appliveview.tanzu.vmware.com
      # # - conventions.appliveview.tanzu.vmware.com
      # - learningcenter.tanzu.vmware.com
      - workshops.learningcenter.tanzu.vmware.com
      - policy.apps.tanzu.vmware.com
      - tap-telemetry.tanzu.vmware.com
    package_overlays:
    - name: contour
      secrets:
      - name: contour-overlay
    contour:
      envoy:
        service:
          type: NodePort
    
    shared:
      ingress_domain: k8s.binbytes.io
      ingress_issuer: k8s-binbytes
    
    accelerator:
      server:
        watched_namespaces: accelerator
        service_type: ClusterIP
    
    cnrs:
      ingress:
        external:
          namespace: tanzu-system-ingress
        internal:
          namespace: tanzu-system-ingress
      domain_name: k8s.binbytes.io
      ingress_issuer: k8s-binbytes
      lite:
        enable: true
    
    supply_chain: testing_scanning
    
    ootb_supply_chain_basic:
      registry:
        server: "public.ecr.aws/n0v5c2t4"
        repository: "tap"
      gitops:
        ssh_secret: ""
    
    ootb_supply_chain_testing:
      registry:
        server: us-west1-docker.pkg.dev
        repository: lkimmel-1069/tap
      gitops:
        ssh_secret: ""
    
    ootb_supply_chain_testing_scanning:
      registry:
        repository: lkimmel-1069/tap
        server: us-west1-docker.pkg.dev
        # repository: tap
        # server: 938504343993.dkr.ecr.us-west-2.amazonaws.com
      gitops:
        server_address: https://github.com
        repository_owner: logankimmel
        repository_name: gitops
        commit_strategy: pull_request
        pull_request:
          server_kind: github
          commit_branch: ""
          pull_request_title: ready for review
          pull_request_body: generated by supply chain
        ssh_secret: "git-https"
    
    tap_gui:
      auth:
        loginPage:
          github:
            title: Github Login
            message: Enter with your GitHub account
      ingressEnabled: true
      tls:
        namespace: tap-install
        secretName: tap-gui-crt
      ingressDomain: k8s.binbytes.io
      service_type: ClusterIP
      app_config:
        app:
          baseUrl: https://tap-gui.k8s.binbytes.io
            #        integrations:
            #        catalog:
            #          locations:
            #            - type: url
            #              target: https://github.com/logankimmel/tap/blob/main/catalog-info.yaml
        backend:
            baseUrl: https://tap-gui.k8s.binbytes.io
            cors:
                origin: https://tap-gui.k8s.binbytes.io
        # proxy:
        #   /metadata-store:
        #     target: https://metadata-store-app.metadata-store:8443/api/v1
        #     changeOrigin: true
        #     secure: false
        #     headers:
        #       X-Custom-Source: project-star
        #       Authorization: "Bearer eyJhbGciOiJSUzI1NiIsImtpZCI6ImdTMGdhTndxQWFrLWJtWGJfX3R0dnN1Ymg2ckhFV0I0LWlKZmdEMmV4b3cifQ.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJtZXRhZGF0YS1zdG9yZSIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VjcmV0Lm5hbWUiOiJtZXRhZGF0YS1zdG9yZS1yZWFkLXdyaXRlLWNsaWVudCIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VydmljZS1hY2NvdW50Lm5hbWUiOiJtZXRhZGF0YS1zdG9yZS1yZWFkLXdyaXRlLWNsaWVudCIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VydmljZS1hY2NvdW50LnVpZCI6ImE1YzU1ZDcwLTdmMWMtNGNkZS04OGE1LTg4ZjhjODdhYTI5YyIsInN1YiI6InN5c3RlbTpzZXJ2aWNlYWNjb3VudDptZXRhZGF0YS1zdG9yZTptZXRhZGF0YS1zdG9yZS1yZWFkLXdyaXRlLWNsaWVudCJ9.ErXwEeAsJG0Jbs14mbDdqfKEuEwjmW7LckQW59G0e7sKV2Cre8CcDZB4-zDywP76Lc1oPP3Xe8jS3n_cJP-E4p7oNzgeey7OtTJ8Mx7XutzsRt25bRecOi4Srk7h4o0TATEIV6d25ZjeDweXwSWvlFFAW4F4rXk8KjIAobHjZUYe2xHYd-Qv4fRYH664F6y77Uvtf6Ed5bujxhtLLs0mElUsHiFflD9X-6uPsUy4xzsSVeLyh5skwL8LAjI_BrA9yP0q-H6WRncu_1Jd_aSC4_M8kp7noa4amFvgLoJaFRewjAtXGwq34cFrsi5i4Xx7-WcxtI1ToQyadBfwQYyZEw"

    metadata_store:
      ns_for_export_app_cert: "*"
      app_service_type: ClusterIP
    
    grype:
      targetImagePullSecret: registry-credentials
    
    namespace_provisioner:
      controller: false
      gitops_install:
        ref: origin/master
        subPath: clusters/local-tap/cluster-config/namespace-provisioner/namespaces
        url: https://github.com/logankimmel/tap-gitops.git
        secretRef:
          name: sync-git
          namespace: tanzu-sync
          create_export: true
      additional_sources:
        # additional sources points to the resources we want to fill those namespaces with
        - git:
            url: https://github.com/logankimmel/tap-gitops.git
            ref: origin/master
            subPath: clusters/local-tap/cluster-config/namespace-provisioner/namespace-resources
            secretRef:
              name: git-https # this is the new credential
              namespace: tap-install
      default_parameters:
        supply_chain_service_account:
          secrets:
            - git-https
    local_source_proxy:
      repository: us-west1-docker.pkg.dev/lkimmel-1069/tap/image

      push_secret:
        name:  registry-credentials
        namespace: tap-install
        create_export: true
      pull_secret:
        name:  registry-credentials
        namespace: tap-install
        create_export: true
      